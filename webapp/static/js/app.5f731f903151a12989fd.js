webpackJsonp([7],{"2D55":function(e,t){},IcnI:function(e,t,n){"use strict";var a=n("7+uW"),o=n("fUgm"),r={state:{device:"desktop"},mutations:{TOGGLE_SIDEBAR:function(e){e.sidebar.opened?Cookies.set("sidebarStatus",1):Cookies.set("sidebarStatus",0),e.sidebar.opened=!e.sidebar.opened},CLOSE_TBA:function(e){e.sidebar.opened=!1},CLOSE_SIDEBAR:function(e,t){Cookies.set("sidebarStatus",1),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:function(e,t){e.device=t}},actions:{ToggleSideBar:function(e){(0,e.commit)("TOGGLE_SIDEBAR")},CloseSideBar:function(e,t){(0,e.commit)("CLOSE_SIDEBAR",t.withoutAnimation)},ToggleDevice:function(e,t){(0,e.commit)("TOGGLE_DEVICE",t)}}},i=n("//Fk"),c=n.n(i),u=n("BO1k"),s=n.n(u),f=n("M9A7"),d=n("TIfe"),l=n("cA94"),m={state:{token:Object(d.a)(),name:"",avatar:"",roles:"",deptId:"",activePath:"/home",tabs:[{path:"/home",icon:"home",name:"首页"}]},mutations:{SET_TOKEN:function(e,t){e.token=t},SET_NAME:function(e,t){e.name=t},SET_AVATAR:function(e,t){e.avatar=t},SET_ROLES:function(e,t){e.roles=t},SET_INFO:function(e,t){e.info=t},SET_TABS:function(e,t){e.tabs.push(t)},SET_ACTIVE:function(e,t){e.activePath=t},delete_tabs:function(e,t){var n=0,a=!0,o=!1,r=void 0;try{for(var i,c=s()(e.tabs);!(a=(i=c.next()).done);a=!0){if(-1!=i.value.path.indexOf(t))break;n++}}catch(e){o=!0,r=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw r}}this.state.user.tabs.splice(n,1)}},actions:{Login:function(e,t){var n=e.commit;console.log(t);var a=t.username.trim();return new c.a(function(e,o){Object(f.b)(a,t.password).then(function(t){if(200==t.code){var a=t.dataList[0];Object(d.c)(a),n("SET_TOKEN",a),e(t)}else e(t)}).catch(function(t){n("SET_TOKEN",""),e()})})},GetInfo:function(e){var t=e.commit;e.state;return new c.a(function(e,n){Object(f.a)().then(function(n){if(200==n.code){var a=n.dataList[0];Object(l.a)(a.id).then(function(o){if(200==o.code){var r=o.dataList[0];t("SET_ROLES",a.roleId),t("SET_NAME",a.realName),t("SET_INFO",r),e(n)}else t("SET_INFO",a),e(n)})}}).catch(function(e){n(e)})})},LogOut:function(e){var t=e.commit;e.state;return new c.a(function(e,n){Object(f.c)().then(function(n){t("SET_TOKEN",""),t("SET_ROLES",[]),Object(d.b)(),e(n)}).catch(function(e){n(e)})})},FedLogOut:function(e){var t=e.commit;return new c.a(function(e){t("SET_TOKEN",""),Object(d.b)(),e()})}}},p={sidebar:function(e){return e.app.sidebar},device:function(e){return e.app.device},token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},roles:function(e){return e.user.roles},info:function(e){return e.user.info},tabs:function(e){return e.user.tabs},activePath:function(e){return e.user.activePath}};a.a.use(o.a);var b=new o.a.Store({modules:{app:r,user:m},getters:p});t.a=b},M9A7:function(e,t,n){"use strict";t.b=function(e,t){return Object(a.a)({url:"base/login/mobile",method:"post",data:{mobileNumber:e,validateCode:t}})},t.d=function(e){return Object(a.a)({url:"base/user/smsCode",method:"get",params:{mobileNumber:e}})},t.a=function(){return Object(a.a)({url:"base/user/info",method:"get"})},t.c=function(){return Object(a.a)({url:"base/logout",method:"get"})};var a=n("vLgD")},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},o,!1,function(e){n("ajlT")},null,null).exports,i=n("IcnI"),c=n("YaEn"),u=n("E4C3"),s=n.n(u),f=(n("ve9D"),n("TIfe")),d=["/login"];c.a.beforeEach(function(e,t,n){s.a.start(),Object(f.a)()?"/login"===e.path?(n({path:"/"}),s.a.done()):(console.log(i.a.getters.name),""===i.a.getters.name?i.a.dispatch("GetInfo").then(function(e){n()}).catch(function(e){i.a.dispatch("FedLogOut").then(function(){n({path:"/"})})}):n()):-1!==d.indexOf(e.path)?n():(n("/login"),s.a.done())}),c.a.afterEach(function(){s.a.done()});n("2D55");var l=n("AMWc"),m=n("dO3j"),p=n.n(m);a.a.use(p.a),a.a.use(l.b),a.a.config.productionTip=!1,new a.a({el:"#app",router:c.a,store:i.a,components:{App:r},template:"<App/>"})},TIfe:function(e,t,n){"use strict";t.a=function(){return sessionStorage.getItem(a)},t.c=function(e){return sessionStorage.setItem(a,e)},t.b=function(){return sessionStorage.setItem(a,"")};var a="loginToken"},YaEn:function(e,t,n){"use strict";var a=n("7+uW"),o=n("/ocq");a.a.use(o.a),t.a=new o.a({routes:[{path:"/login",name:"login",component:function(){return n.e(4).then(n.bind(null,"W2Q3"))}},{path:"/home",name:"home",component:function(){return Promise.all([n.e(1),n.e(0)]).then(n.bind(null,"JXTs"))}},{path:"/",name:"question",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"7Vqv"))}},{path:"/history",name:"history",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"Oi8u"))}},{path:"/404",name:"404",component:function(){return n.e(5).then(n.bind(null,"23Cv"))}},{path:"*",redirect:"/404",hidden:!0,roleId:[1,13,18]}]})},ajlT:function(e,t){},cA94:function(e,t,n){"use strict";t.c=function(e){return Object(a.a)({url:"ips/medicalRecord/"+e,method:"get"})},t.a=function(e){return Object(a.a)({url:"ips/medicalRecord/patientId/"+e,method:"get"})},t.b=function(e){return Object(a.a)({url:"ips/medicalRecord/"+e,method:"get"})};var a=n("vLgD")},vLgD:function(e,t,n){"use strict";var a=n("//Fk"),o=n.n(a),r=n("I29D"),i=n.n(r),c=(n("IcnI"),n("YaEn")),u=n("TIfe"),s=n("AMWc"),f=i.a.create({baseURL:"http://ips.xsyxsy.com/",timeout:15e3});f.interceptors.request.use(function(e){return e.headers["access-token"]=Object(u.a)()?Object(u.a)():"000000",e.headers["service-id"]="2000",e},function(e){console.log(e),o.a.reject(e)}),f.interceptors.response.use(function(e){var t=e.data;if(t.retcode||804==t.code||"200"==t.code)return e.data;if("601"!=t.code&&"602"!=t.code){var n=t.message?t.message:t.msg;return Object(s.a)({message:n,type:"warning",duration:3e3}),o.a.reject("error")}sessionStorage.clear(),Object(s.a)({message:"登录信息已过期",type:"warning",duration:3e3}),c.a.push({path:"/login"})},function(e){return console.log("err"+e),Object(s.a)({message:"服务器连接失败",type:"warning",duration:3e3}),o.a.reject(e)}),t.a=f},ve9D:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5f731f903151a12989fd.js.map